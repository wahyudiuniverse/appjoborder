<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,viewport-fit=cover"
    />
    <title>Choices</title>
    <meta
      name="description"
      itemprop="description"
      content="A lightweight, configurable select box/text input plugin. Similar to Select2 and Selectize but without the jQuery dependency."
    />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../../assets/images/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      href="../../assets/images/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      type="image/png"
      href="../../assets/images/favicon-16x16.png"
      sizes="16x16"
    />
    <link rel="manifest" href="../../assets/images/manifest.json" />
    <link
      rel="mask-icon"
      href="../../assets/images/safari-pinned-tab.svg"
      color="#005F75"
    />
    <link rel="shortcut icon" href="../../assets/images/favicon.ico" />
    <meta
      name="msapplication-config"
      content="../../assets/images/browserconfig.xml"
    />
    <meta name="theme-color" content="#ffffff" />

    <!-- Ignore these -->
    <link rel="stylesheet" href="../../assets/styles/base.min.css" />
    <!-- End ignore these -->

    <!-- Choices includes -->
    <link rel="stylesheet" href="../../assets/styles/choices.min.css" />
    <script src="../../assets/scripts/choices.js"></script>
    <!-- End Choices includes -->
  </head>

  <body>
    <div class="container">
      <div class="section">
        <h2>Text inputs</h2>
        <div data-test-hook="basic">
          <label for="choices-basic">Basic</label>
          <input class="form-control" id="choices-basic" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-basic', {
                allowHTML: true,
              });
            });
          </script>
        </div>

        <div data-test-hook="edit-items">
          <label for="choices-edit-items">Edit items</label>
          <input class="form-control" id="choices-edit-items" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-edit-items', {
                allowHTML: true,
                editItems: true,
              });
            });
          </script>
        </div>

        <div data-test-hook="remove-button">
          <label for="choices-remove-button">Remove button</label>
          <input class="form-control" id="choices-remove-button" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-remove-button', {
                allowHTML: true,
                removeItemButton: true,
              });
            });
          </script>
        </div>

        <div data-test-hook="unique-values">
          <label for="choices-unique-values">Unique values</label>
          <input class="form-control" id="choices-unique-values" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-unique-values', {
                allowHTML: true,
                duplicateItemsAllowed: false,
              });
            });
          </script>
        </div>

        <div data-test-hook="allowhtml-undefined">
          <label for="allowhtml-undefined">HTML disabled by default</label>
          <input class="form-control" id="allowhtml-undefined" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#allowhtml-undefined', {
                items: [
                  '<b>Mason Rogers</b>'
                ],
              });
            });
          </script>
        </div>

        <div data-test-hook="allowhtml-true">
          <label for="allowhtml-true">HTML allowed (adds choices)</label>
          <input class="form-control" id="allowhtml-true" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#allowhtml-true', {
                allowHTML: true,
                allowHtmlUserInput: true,
                items: [
                  '<b>Mason Rogers</b>'
                ],
              });
            });
          </script>
        </div>

        <div data-test-hook="allowhtml-true-userinput-false">
          <label for="allowhtml-true-userinput-false">HTML allowed (except user input, adds choices)</label>
          <input class="form-control" id="allowhtml-true-userinput-false" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#allowhtml-true-userinput-false', {
                allowHTML: true,
                allowHtmlUserInput: false,
                items: [
                  '<b>Mason Rogers</b>'
                ],
              });
            });
          </script>
        </div>

        <div data-test-hook="allowhtml-false">
          <label for="allowhtml-false">HTML disabled (adds choices)</label>
          <input class="form-control" id="allowhtml-false" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#allowhtml-false', {
                allowHTML: false,
                allowHtmlUserInput: false,
                items: [
                  '<b>Mason Rogers</b>'
                ],
              });
            });
          </script>
        </div>

        <div data-test-hook="input-limit">
          <label for="choices-input-limit">Input limit</label>
          <input class="form-control" id="choices-input-limit" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-input-limit', {
                allowHTML: true,
                maxItemCount: 5,
              });
            });
          </script>
        </div>

        <div data-test-hook="add-item-filter">
          <label for="choices-add-item-filter">Add item filter</label>
          <input
            class="form-control"
            id="choices-add-item-filter"
            type="text"
          />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-add-item-filter', {
                allowHTML: true,
                addItems: true,
                addItemFilter: value => {
                  const regex = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                  const expression = new RegExp(regex.source, 'i');
                  return expression.test(value);
                },
              });
            });
          </script>
        </div>

        <div data-test-hook="adding-items-disabled">
          <label for="choices-adding-items-disabled">Add items disabled</label>
          <input
            class="form-control"
            id="choices-adding-items-disabled"
            type="text"
          />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-adding-items-disabled', {
                allowHTML: true,
                addItems: false,
              });
            });
          </script>
        </div>

        <div data-test-hook="disabled-via-fieldset">
          <label for="choices-disabled-via-fieldset">Disabled via fieldset</label>
          <fieldset disabled>
            <input
              class="form-control"
              id="choices-disabled-via-fieldset"
              type="text"
            />
          </fieldset>
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-disabled-via-fieldset', {
                allowHTML: true,
              });
            });
          </script>
        </div>

        <div data-test-hook="disabled-via-attr">
          <label for="choices-disabled-via-attr">Disabled via attribute</label>
          <input
            class="form-control"
            id="choices-disabled-via-attr"
            type="text"
            disabled
          />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-disabled-via-attr', {
                allowHTML: true,
              });
            });
          </script>
        </div>

        <div data-test-hook="prepend-append">
          <label for="choices-prepend-append">Prepend/append</label>
          <input class="form-control" id="choices-prepend-append" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-prepend-append', {
                allowHTML: true,
                prependValue: 'before-',
                appendValue: '-after',
              });
            });
          </script>
        </div>

        <div data-test-hook="prepopulated">
          <label for="choices-prepopulated">Pre-populated choices</label>
          <input class="form-control" id="choices-prepopulated" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-prepopulated', {
                allowHTML: true,
                items: [
                  'Josh Johnson',
                  {
                    value: 'joe@bloggs.co.uk',
                    label: 'Joe Bloggs',
                    customProperties: {
                      description: 'Joe Blogg is such a generic name',
                    },
                  },
                ],
              });
            });
          </script>
        </div>

        <div data-test-hook="placeholder">
          <label for="choices-placeholder">Placeholder</label>
          <input class="form-control" id="choices-placeholder" type="text" />
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-placeholder', {
                allowHTML: true,
                placeholder: true,
                placeholderValue: 'I am a placeholder',
              });
            });
          </script>
        </div>

        <div data-test-hook="within-form">
          <form>
            <label for="choices-within-form">Within form</label>
            <input class="form-control" id="choices-within-form" type="text" />
          </form>
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              new Choices('#choices-within-form', {
                allowHTML: true,
              });
            });
          </script>
        </div>

        <div data-test-hook="new-destroy-init">
          <label for="choices-new-destroy-init">New, Destroy, Init</label>
          <input class="form-control" id="choices-new-destroy-init" type="text" />
          <button class="destroy">Destroy</button>
          <button class="init">Init</button>
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              const newDestroyInitChoices = new Choices('#choices-new-destroy-init', {
                allowHTML: true,
              });
              document
                .querySelector('button.destroy')
                .addEventListener('click', () => {
                  newDestroyInitChoices.destroy();
                });
              document.querySelector('button.init').addEventListener('click', () => {
                newDestroyInitChoices.init();
              });
            });
          </script>
        </div>

        <div data-test-hook="shadow-dom">
          <noscript style="display:none;">
          <link rel="stylesheet" href="../../assets/styles/base.min.css" />
          <link rel="stylesheet" href="../../assets/styles/choices.min.css" />
          <script src="../../assets/scripts/choices.min.js"></script>
          <label for="shadow-dom-choices-basic">Shadow DOM - Basic</label>
          <input class="form-control" id="shadow-dom-choices-basic" type="text" />
          </noscript>
          <div data-shadow-dom></div>
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              const shadowDomTest = document.querySelector('div[data-test-hook="shadow-dom"]'),
                payload = shadowDomTest.querySelector('noscript'),
                shadowDomHtml = payload.innerHTML,
                shadowDomWrapper = shadowDomTest.querySelector('div[data-shadow-dom]');
              payload.innerHTML = ''; // ensure the shadow-dom example is not part of the main document
              const shadowRoot = shadowDomWrapper.attachShadow({ mode: 'open' });
              shadowRoot.innerHTML = shadowDomHtml;

              new Choices('#shadow-dom-choices-basic', {
                allowHTML: false,
                shadowRoot: shadowRoot,
              });
            });
          </script>
        </div>

      </div>
    </div>
  </body>
</html>
